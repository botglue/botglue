# Frontend Exec UI

## Context

The `POST /api/environments/{id}/exec` endpoint and `api.environments.exec()` client method already exist but have no UI. This plan adds a command panel to the Environment Detail page so users can run shell commands inside their container and see the output.

## Implementation

### File: `web/src/pages/EnvironmentDetailPage.tsx`

Add exec UI as a new section between "Ports" and "Agents" on the existing page. No new files or components needed — it's self-contained state within the page.

**New state:**
```typescript
const [command, setCommand] = useState("");
const [execOutput, setExecOutput] = useState<{ output: string; exit_code: number }[]>([]);
const [execLoading, setExecLoading] = useState(false);
```

**Handler:**
```typescript
async function handleExec(e: React.FormEvent) {
  e.preventDefault();
  if (!command.trim()) return;
  setExecLoading(true);
  try {
    const result = await api.environments.exec(envId!, command);
    setExecOutput(prev => [...prev, { ...result, command }]); // append to history
    setCommand("");
  } catch (e) {
    setExecOutput(prev => [...prev, { output: e.message, exit_code: -1 }]);
  } finally {
    setExecLoading(false);
  }
}
```

**UI section** (only shown when status is "running"):
- Section header: "Terminal" (same uppercase style as "Ports" and "Agents")
- Scrollable output area (`max-h-80 overflow-y-auto`) with dark bg (`bg-[#0a0a0f]`), monospace font, showing command history with outputs
- Each entry shows: `$ {command}` in lighter color, then output below, with non-zero exit codes highlighted in red
- Form at bottom: text input + "Run" button, same styling as existing forms (`bg-[#0a0a0f] border border-[#2a2a4f]`)
- Input disabled while `execLoading` is true
- Auto-scroll to bottom on new output

### Existing code to reuse
- `api.environments.exec(id, command)` from `ui-common/api/client.ts`
- Input styling from `CreateAgentForm.tsx`: `bg-[#0a0a0f] border border-[#2a2a4f] focus:border-[#4a4a6f] rounded px-3 py-2 text-sm`
- Button styling: `bg-[#2a2a4f] hover:bg-[#3a3a5f] disabled:opacity-50 rounded px-3 py-2 text-sm`
- Section header: `text-sm font-medium text-[#a0a0b0] uppercase tracking-wide mb-3`

## Verification

1. `npm run build` in `web/` — no TypeScript errors
2. Manual: start daemon, create environment, navigate to env detail page, type a command (e.g. `echo hello`), verify output appears, verify non-zero exit codes show red, verify input is disabled while running environment is paused
